{"remainingRequest":"/home/abdoulaye/Bureau/Projet JHipster/node_modules/thread-loader/dist/cjs.js??ref--9-2!/home/abdoulaye/Bureau/Projet JHipster/node_modules/ts-loader/index.js??ref--9-3!/home/abdoulaye/Bureau/Projet JHipster/node_modules/eslint-loader/dist/cjs.js!/home/abdoulaye/Bureau/Projet JHipster/src/main/webapp/app/core/auth/auth-jwt.service.ts","dependencies":[{"path":"/home/abdoulaye/Bureau/Projet JHipster/src/main/webapp/app/core/auth/auth-jwt.service.ts","mtime":1570627187091},{"path":"/home/abdoulaye/Bureau/Projet JHipster/node_modules/angular2-template-loader/index.js","mtime":1570626895001},{"path":"/home/abdoulaye/Bureau/Projet JHipster/node_modules/cache-loader/dist/cjs.js","mtime":1570626922745},{"path":"/home/abdoulaye/Bureau/Projet JHipster/node_modules/thread-loader/dist/cjs.js","mtime":1570627173786},{"path":"/home/abdoulaye/Bureau/Projet JHipster/node_modules/ts-loader/index.js","mtime":1570627174422},{"path":"/home/abdoulaye/Bureau/Projet JHipster/node_modules/eslint-loader/dist/cjs.js","mtime":1570626977794}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tICJ0c2xpYiI7CnZhciBfYSwgX2IsIF9jOwppbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7CmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJzsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycwppbXBvcnQgeyBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7CmltcG9ydCB7IExvY2FsU3RvcmFnZVNlcnZpY2UsIFNlc3Npb25TdG9yYWdlU2VydmljZSB9IGZyb20gJ25neC13ZWJzdG9yYWdlJzsKaW1wb3J0IHsgU0VSVkVSX0FQSV9VUkwgfSBmcm9tICdhcHAvYXBwLmNvbnN0YW50cyc7CmxldCBBdXRoU2VydmVyUHJvdmlkZXIgPSBjbGFzcyBBdXRoU2VydmVyUHJvdmlkZXIgewogICAgY29uc3RydWN0b3IoaHR0cCwgJGxvY2FsU3RvcmFnZSwgJHNlc3Npb25TdG9yYWdlKSB7CiAgICAgICAgdGhpcy5odHRwID0gaHR0cDsKICAgICAgICB0aGlzLiRsb2NhbFN0b3JhZ2UgPSAkbG9jYWxTdG9yYWdlOwogICAgICAgIHRoaXMuJHNlc3Npb25TdG9yYWdlID0gJHNlc3Npb25TdG9yYWdlOwogICAgfQogICAgZ2V0VG9rZW4oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGxvY2FsU3RvcmFnZS5yZXRyaWV2ZSgnYXV0aGVudGljYXRpb25Ub2tlbicpIHx8IHRoaXMuJHNlc3Npb25TdG9yYWdlLnJldHJpZXZlKCdhdXRoZW50aWNhdGlvblRva2VuJyk7CiAgICB9CiAgICBsb2dpbihjcmVkZW50aWFscykgewogICAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgICAgIHVzZXJuYW1lOiBjcmVkZW50aWFscy51c2VybmFtZSwKICAgICAgICAgICAgcGFzc3dvcmQ6IGNyZWRlbnRpYWxzLnBhc3N3b3JkLAogICAgICAgICAgICByZW1lbWJlck1lOiBjcmVkZW50aWFscy5yZW1lbWJlck1lCiAgICAgICAgfTsKICAgICAgICBmdW5jdGlvbiBhdXRoZW50aWNhdGVTdWNjZXNzKHJlc3ApIHsKICAgICAgICAgICAgY29uc3QgYmVhcmVyVG9rZW4gPSByZXNwLmhlYWRlcnMuZ2V0KCdBdXRob3JpemF0aW9uJyk7CiAgICAgICAgICAgIGlmIChiZWFyZXJUb2tlbiAmJiBiZWFyZXJUb2tlbi5zbGljZSgwLCA3KSA9PT0gJ0JlYXJlciAnKSB7CiAgICAgICAgICAgICAgICBjb25zdCBqd3QgPSBiZWFyZXJUb2tlbi5zbGljZSg3LCBiZWFyZXJUb2tlbi5sZW5ndGgpOwogICAgICAgICAgICAgICAgdGhpcy5zdG9yZUF1dGhlbnRpY2F0aW9uVG9rZW4oand0LCBjcmVkZW50aWFscy5yZW1lbWJlck1lKTsKICAgICAgICAgICAgICAgIHJldHVybiBqd3Q7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFNFUlZFUl9BUElfVVJMICsgJ2FwaS9hdXRoZW50aWNhdGUnLCBkYXRhLCB7IG9ic2VydmU6ICdyZXNwb25zZScgfSkucGlwZShtYXAoYXV0aGVudGljYXRlU3VjY2Vzcy5iaW5kKHRoaXMpKSk7CiAgICB9CiAgICBsb2dpbldpdGhUb2tlbihqd3QsIHJlbWVtYmVyTWUpIHsKICAgICAgICBpZiAoand0KSB7CiAgICAgICAgICAgIHRoaXMuc3RvcmVBdXRoZW50aWNhdGlvblRva2VuKGp3dCwgcmVtZW1iZXJNZSk7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoand0KTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnYXV0aC1qd3Qtc2VydmljZSBQcm9taXNlIHJlamVjdCcpOyAvLyBQdXQgYXBwcm9wcmlhdGUgZXJyb3IgbWVzc2FnZSBoZXJlCiAgICAgICAgfQogICAgfQogICAgc3RvcmVBdXRoZW50aWNhdGlvblRva2VuKGp3dCwgcmVtZW1iZXJNZSkgewogICAgICAgIGlmIChyZW1lbWJlck1lKSB7CiAgICAgICAgICAgIHRoaXMuJGxvY2FsU3RvcmFnZS5zdG9yZSgnYXV0aGVudGljYXRpb25Ub2tlbicsIGp3dCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLiRzZXNzaW9uU3RvcmFnZS5zdG9yZSgnYXV0aGVudGljYXRpb25Ub2tlbicsIGp3dCk7CiAgICAgICAgfQogICAgfQogICAgbG9nb3V0KCkgewogICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShvYnNlcnZlciA9PiB7CiAgICAgICAgICAgIHRoaXMuJGxvY2FsU3RvcmFnZS5jbGVhcignYXV0aGVudGljYXRpb25Ub2tlbicpOwogICAgICAgICAgICB0aGlzLiRzZXNzaW9uU3RvcmFnZS5jbGVhcignYXV0aGVudGljYXRpb25Ub2tlbicpOwogICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpOwogICAgICAgIH0pOwogICAgfQp9OwpBdXRoU2VydmVyUHJvdmlkZXIgPSB0c2xpYl8xLl9fZGVjb3JhdGUoWwogICAgSW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46ICdyb290JyB9KSwKICAgIHRzbGliXzEuX19tZXRhZGF0YSgiZGVzaWduOnBhcmFtdHlwZXMiLCBbdHlwZW9mIChfYSA9IHR5cGVvZiBIdHRwQ2xpZW50ICE9PSAidW5kZWZpbmVkIiAmJiBIdHRwQ2xpZW50KSA9PT0gImZ1bmN0aW9uIiA/IF9hIDogT2JqZWN0LCB0eXBlb2YgKF9iID0gdHlwZW9mIExvY2FsU3RvcmFnZVNlcnZpY2UgIT09ICJ1bmRlZmluZWQiICYmIExvY2FsU3RvcmFnZVNlcnZpY2UpID09PSAiZnVuY3Rpb24iID8gX2IgOiBPYmplY3QsIHR5cGVvZiAoX2MgPSB0eXBlb2YgU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlICE9PSAidW5kZWZpbmVkIiAmJiBTZXNzaW9uU3RvcmFnZVNlcnZpY2UpID09PSAiZnVuY3Rpb24iID8gX2MgOiBPYmplY3RdKQpdLCBBdXRoU2VydmVyUHJvdmlkZXIpOwpleHBvcnQgeyBBdXRoU2VydmVyUHJvdmlkZXIgfTsK"},{"version":3,"file":"/home/abdoulaye/Bureau/Projet JHipster/src/main/webapp/app/core/auth/auth-jwt.service.ts","sourceRoot":"","sources":["/home/abdoulaye/Bureau/Projet JHipster/node_modules/eslint-loader/dist/cjs.js!/home/abdoulaye/Bureau/Projet JHipster/src/main/webapp/app/core/auth/auth-jwt.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { map } from 'rxjs/operators';\nimport { LocalStorageService, SessionStorageService } from 'ngx-webstorage';\n\nimport { SERVER_API_URL } from 'app/app.constants';\n\n@Injectable({ providedIn: 'root' })\nexport class AuthServerProvider {\n  constructor(private http: HttpClient, private $localStorage: LocalStorageService, private $sessionStorage: SessionStorageService) {}\n\n  getToken() {\n    return this.$localStorage.retrieve('authenticationToken') || this.$sessionStorage.retrieve('authenticationToken');\n  }\n\n  login(credentials): Observable<any> {\n    const data = {\n      username: credentials.username,\n      password: credentials.password,\n      rememberMe: credentials.rememberMe\n    };\n\n    function authenticateSuccess(resp) {\n      const bearerToken = resp.headers.get('Authorization');\n      if (bearerToken && bearerToken.slice(0, 7) === 'Bearer ') {\n        const jwt = bearerToken.slice(7, bearerToken.length);\n        this.storeAuthenticationToken(jwt, credentials.rememberMe);\n        return jwt;\n      }\n    }\n\n    return this.http.post(SERVER_API_URL + 'api/authenticate', data, { observe: 'response' }).pipe(map(authenticateSuccess.bind(this)));\n  }\n\n  loginWithToken(jwt, rememberMe) {\n    if (jwt) {\n      this.storeAuthenticationToken(jwt, rememberMe);\n      return Promise.resolve(jwt);\n    } else {\n      return Promise.reject('auth-jwt-service Promise reject'); // Put appropriate error message here\n    }\n  }\n\n  storeAuthenticationToken(jwt, rememberMe) {\n    if (rememberMe) {\n      this.$localStorage.store('authenticationToken', jwt);\n    } else {\n      this.$sessionStorage.store('authenticationToken', jwt);\n    }\n  }\n\n  logout(): Observable<any> {\n    return new Observable(observer => {\n      this.$localStorage.clear('authenticationToken');\n      this.$sessionStorage.clear('authenticationToken');\n      observer.complete();\n    });\n  }\n}\n"]}]}